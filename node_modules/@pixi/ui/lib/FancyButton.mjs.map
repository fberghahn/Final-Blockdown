{"version":3,"file":"FancyButton.mjs","sources":["../src/FancyButton.ts"],"sourcesContent":["import { Container, isMobile, NineSliceSprite, ObservablePoint, Rectangle, Texture, Ticker } from 'pixi.js';\nimport { Group, Tween } from 'tweedle.js';\nimport { ButtonContainer } from './Button';\nimport { fitToView } from './utils/helpers/fit';\nimport { AnyText, getTextView, PixiText } from './utils/helpers/text';\nimport { getView } from './utils/helpers/view';\n\nimport type { Sprite } from 'pixi.js';\n\ntype State = 'default' | 'hover' | 'pressed' | 'disabled';\ntype Pos = { x?: number; y?: number };\ntype PosList = { [K in State]?: Pos };\n\nexport type Offset = Pos & PosList;\n\ntype ButtonViewType = 'defaultView' | 'hoverView' | 'pressedView' | 'disabledView';\n\ntype ButtonView = string | Container;\n\ntype BasicButtonViews = {\n    [K in ButtonViewType]?: Container | NineSliceSprite;\n};\n\ntype ButtonViews = BasicButtonViews & {\n    textView?: PixiText;\n    iconView?: Container;\n};\n\ntype AnimationData = {\n    x?: number;\n    y?: number;\n    width?: number;\n    height?: number;\n    scale?: Pos;\n};\n\ntype Animation = {\n    props: AnimationData;\n    duration?: number;\n};\n\ntype StateAnimations = {\n    [K in State]?: Animation;\n};\n\ntype BasicViewsInput = {\n    [K in ButtonViewType]?: ButtonView;\n};\n\ntype ViewsInput = BasicViewsInput & {\n    text?: AnyText;\n    icon?: ButtonView;\n};\n\nexport type ButtonOptions = ViewsInput & {\n    padding?: number;\n    scale?: number;\n    anchor?: number;\n    anchorX?: number;\n    anchorY?: number;\n    offset?: Offset;\n    textOffset?: Offset;\n    iconOffset?: Offset;\n    animations?: StateAnimations;\n    nineSliceSprite?: [number, number, number, number];\n};\n\n/**\n * Button component with a lot of tweaks.\n *\n * All views, text, icon and animations are optional. You can set them via constructor pr update later.\n *\n * By default text view and icon view are centered in the active view.\n *\n * Offset property of the constructor can be used to adjust the position of the text, icon and the views.\n * @example\n * const button = new FancyButton({\n *     defaultView: `button.png`,\n *     hoverView: `button_hover.png`,\n *     pressedView: `button_pressed.png`,\n *     text: 'Click me!',\n *     animations: {\n *          hover: {\n *              props: {\n *                  scale: {\n *                      x: 1.1,\n *                      y: 1.1,\n *                  }\n *              },\n *              duration: 100,\n *          },\n *          pressed: {\n *              props: {\n *                  scale: {\n *                      x: 0.9,\n *                      y: 0.9,\n *                  }\n *              },\n *              duration: 100,\n *          }\n *      }\n * });\n *\n * button.onPress.connect(() => console.log('Button pressed!'));\n */\nexport class FancyButton extends ButtonContainer\n{\n    protected animations: StateAnimations;\n    protected originalInnerViewState: AnimationData;\n    protected defaultDuration = 100;\n\n    /** FancyButton options. */\n    protected readonly options?: ButtonOptions;\n\n    /** Padding of the button text view. If button text does not fit active view + padding it will scale down to fit. */\n    _padding: number;\n\n    /** Offset of the button state views. If state views have different sizes, this option can help adjust them. */\n    _offset: Offset & Pos;\n\n    /** Offset of the text view. Can be set to any state of the button. */\n    _textOffset: Offset;\n\n    /** Offset of the icon view. Can be set to any state of the button. */\n    iconOffset: Offset;\n\n    //* View that holds all button inner views */\n    innerView = new Container();\n\n    protected _views: ButtonViews = {};\n\n    /** State of the button. Possible valuers are: 'default', 'hover', 'pressed', 'disabled' */\n    state: State;\n\n    /** Anchor point of the button. */\n    anchor: ObservablePoint;\n\n    /**\n     * Creates a button with a lot of tweaks.\n     * @param {object} options - Button options.\n     * @param {Container} options.defaultView - Container-based view that is shown when non of the button events are active.\n     * @param {Container} options.hoverView - Container-based view that is shown when the mouse hovers over the button.\n     * @param {Container} options.pressedView - Container-based view, shown when the mouse press on the component.\n     * @param {Container} options.disabledView - Container-based view shown when the button is disabled.\n     * @param {Container} options.icon - Container-based view for the button icon.\n     * @param {Text} options.text - Text-based view for the button text.\n     * @param {number} options.padding - Padding of the button text and icon views.\n     * If button text or icon does not fit active view + padding it will scale down to fit.\n     * @param {Point} options.offset - Offset of the button state views.\n     * @param {Point} options.textOffset - Offset of the text view.\n     * @param {Point} options.iconOffset - Offset of the icon view.\n     * @param {number} options.scale - Scale of the button. Scale will be applied to a main container,\n     * when all animations scales will be applied to the inner view.\n     * @param {number} options.anchor - Anchor point of the button.\n     * @param {number} options.anchorX - Horizontal anchor point of the button.\n     * @param {number} options.anchorY - Vertical anchor point of the button.\n     * @param options.animations - Animations that will be played when the button state changes.\n     */\n    constructor(options?: ButtonOptions)\n    {\n        super();\n\n        this.options = options;\n\n        const {\n            defaultView,\n            hoverView,\n            pressedView,\n            disabledView,\n            text,\n            padding,\n            offset,\n            textOffset,\n            iconOffset,\n            scale,\n            anchor,\n            anchorX,\n            anchorY,\n            icon,\n            animations\n        } = options ?? {};\n\n        this.addChild(this.innerView);\n\n        this.anchor = new ObservablePoint({\n            _onUpdate: () => this.updateAnchor(),\n        });\n        this.anchor.set(anchorX ?? anchor ?? 0, anchorY ?? anchor ?? 0);\n\n        this.padding = padding ?? 0;\n        this.offset = offset;\n        this.textOffset = textOffset;\n        this.iconOffset = iconOffset;\n        this.scale.set(scale ?? 1);\n\n        if (animations)\n        {\n            this.animations = animations;\n            Ticker.shared.add(() => Group.shared.update());\n        }\n\n        this.setState('default');\n\n        this.defaultView = defaultView;\n        this.hoverView = hoverView;\n        this.pressedView = pressedView;\n        this.disabledView = disabledView;\n        this.text = text;\n        this.iconView = icon;\n\n        this.initStateControl();\n    }\n\n    /**\n     * Updates the text of the button and updates its scaling basing on the new size.\n     * @param {string | number} text\n     */\n    set text(text: AnyText)\n    {\n        if (!text || text === 0)\n        {\n            this.removeView('textView');\n\n            return;\n        }\n\n        if (!this._views.textView)\n        {\n            this.createTextView(text);\n\n            return;\n        }\n\n        this._views.textView.text = text.toString();\n    }\n\n    /** Returns the text string of the button text element. */\n    get text(): string | undefined\n    {\n        return this._views.textView?.text;\n    }\n\n    /**\n     * Setter, that prevents all button events from firing.\n     * @param {boolean} enabled\n     */\n    override set enabled(enabled: boolean)\n    {\n        this.button.enabled = enabled;\n\n        this.setState(enabled ? 'default' : 'disabled');\n    }\n\n    override get enabled(): boolean\n    {\n        return this.button.enabled;\n    }\n\n    /**\n     * Updates button state and shows the according views.\n     *\n     * Updates positions and offsets of the views.\n     *\n     * Plays animations if they are set.\n     * @param {State} newState\n     * @param force\n     */\n    setState(newState: State, force = false)\n    {\n        if (!force && this.state === newState)\n        {\n            return;\n        }\n\n        const currentView = this.getStateView(this.state);\n\n        if (currentView) currentView.visible = false;\n\n        this.state = newState;\n\n        const activeView = this.getStateView(newState);\n\n        if (activeView)\n        {\n            this.setOffset(activeView, newState, this.offset);\n            activeView.visible = true;\n        }\n\n        this.updateAnchor();\n\n        this.playAnimations(newState);\n    }\n\n    /**\n     *\n     * Manage button text view.\n     * @param {string | Text} text - can be a string, Text, BitmapText ot HTMLText (Container-based element).\n     */\n    protected createTextView(text: AnyText)\n    {\n        this._views.textView = getTextView(text);\n        this._views.textView.anchor.set(0);\n        this.innerView.addChild(this._views.textView);\n\n        this.adjustTextView(this.state);\n    }\n\n    /**\n     * Manages views offsets if it's set.\n     * @param view\n     * @param state\n     * @param offset\n     */\n    protected setOffset(view: Container, state: State, offset: Offset)\n    {\n        const stateOffset = offset\n            ? offset[state]\n            : {\n                x: 0,\n                y: 0\n            };\n\n        const defaultStateOffset = offset?.default;\n\n        if (stateOffset)\n        {\n            view.x += stateOffset.x ?? 0;\n            view.y += stateOffset.y ?? 0;\n        }\n        else if (defaultStateOffset)\n        {\n            view.x += defaultStateOffset.x ?? 0;\n            view.y += defaultStateOffset.y ?? 0;\n        }\n        else if (offset.x || offset.y)\n        {\n            view.x += offset.x ?? 0;\n            view.y += offset.y ?? 0;\n        }\n    }\n\n    /**\n     * Returns active view for the state.\n     * @param state\n     */\n    protected getStateView(state: State): Container | undefined\n    {\n        if (!this._views) return undefined;\n\n        switch (state)\n        {\n            case 'hover':\n                return this._views.hoverView ?? this._views.defaultView ?? undefined;\n            case 'pressed':\n                return this._views.pressedView ?? this._views.hoverView ?? this._views.defaultView ?? undefined;\n            case 'disabled':\n                return this._views.disabledView ?? this._views.defaultView ?? undefined;\n            case 'default':\n                return this._views.defaultView ?? undefined;\n            default:\n                return undefined;\n        }\n    }\n\n    /**\n     * Adjusts text view position and scale.\n     * @param {State} state\n     */\n    protected adjustTextView(state: State)\n    {\n        if (!this.text) return;\n\n        const activeView = this.getStateView(this.state);\n\n        if (activeView)\n        {\n            fitToView(activeView, this._views.textView, this.padding);\n\n            this._views.textView.x = activeView.x + (activeView.width / 2);\n            this._views.textView.y = activeView.y + (activeView.height / 2);\n        }\n\n        this._views.textView.anchor.set(0.5);\n\n        this.setOffset(this._views.textView, state, this.textOffset);\n    }\n\n    /**\n     * Adjusts icon view position and scale.\n     * @param {State} state\n     */\n    protected adjustIconView(state: State)\n    {\n        if (!this._views.iconView)\n        {\n            return;\n        }\n\n        const activeView = this.getStateView(state);\n\n        if (!activeView)\n        {\n            return;\n        }\n\n        fitToView(activeView, this._views.iconView, this.padding);\n\n        (this._views.iconView as Sprite).anchor?.set(0);\n\n        this._views.iconView.x = activeView.x + (activeView.width / 2) - (this._views.iconView.width / 2);\n        this._views.iconView.y = activeView.y + (activeView.height / 2) - (this._views.iconView.height / 2);\n\n        this.setOffset(this._views.iconView, state, this.iconOffset);\n    }\n\n    /**\n     * Reset views positions according to the button anchor setting.\n     * We have to set the anchor position for each view individually, as each of them\n     * can be a different type of view (container without anchor, sprite with anchor, etc)\n     * we have to reset all anchors to 0,0 and then set the positions manually.\n     */\n    protected updateAnchor()\n    {\n        if (!this._views) return;\n\n        const anchorX = this.anchor.x ?? 0;\n        const anchorY = this.anchor.y ?? 0;\n        const views = [this._views.defaultView, this._views.hoverView, this._views.pressedView, this._views.disabledView];\n\n        views.forEach((view) =>\n        {\n            if (!view) return;\n\n            (view as Sprite).anchor?.set(0);\n\n            view.x = -view.width * anchorX;\n            view.y = -view.height * anchorY;\n        });\n\n        if (this._views.defaultView)\n        {\n            const { x, y, width, height } = this._views.defaultView;\n\n            this.hitArea = new Rectangle(x, y, width, height);\n        }\n\n        this.adjustIconView(this.state);\n        this.adjustTextView(this.state);\n    }\n\n    /**\n     * Sets the default view of the button.\n     * @param { string | Container } view - string (path to the image) or a Container-based view\n     */\n    set defaultView(view: ButtonView | null)\n    {\n        this.updateView('defaultView', view);\n    }\n\n    /** Returns the default view of the button. */\n    get defaultView(): Container | undefined\n    {\n        return this._views.defaultView;\n    }\n\n    /**\n     * Sets the hover view of the button.\n     * @param { string | Container } view - string (path to the image) or a Container-based view\n     */\n    set hoverView(view: ButtonView | null)\n    {\n        this.updateView('hoverView', view);\n        if (this._views.hoverView && this.state !== 'hover')\n        {\n            this._views.hoverView.visible = false;\n        }\n    }\n\n    /** Returns the hover view of the button. */\n    get hoverView(): Container | undefined\n    {\n        return this._views.hoverView;\n    }\n\n    /** Sets the pressed view of the button. */\n    set pressedView(view: ButtonView | null)\n    {\n        this.updateView('pressedView', view);\n        if (this._views.pressedView)\n        {\n            this._views.pressedView.visible = false;\n        }\n    }\n\n    /** Returns the pressed view of the button. */\n    get pressedView(): Container | undefined\n    {\n        return this._views.pressedView;\n    }\n\n    /** Sets the disabled view of the button. */\n    set disabledView(view: ButtonView | null)\n    {\n        this.updateView('disabledView', view);\n        if (this._views.disabledView)\n        {\n            this._views.disabledView.visible = false;\n        }\n    }\n\n    /** Returns the disabled view of the button. */\n    get disabledView(): Container | undefined\n    {\n        return this._views.disabledView;\n    }\n\n    /**\n     * Helper method to update or cleanup button views.\n     * @param { 'defaultView' | 'hoverView' | 'pressedView' | 'disabledView' } viewType - type of the view to update\n     * @param { string | Container | null } view - new view\n     */\n    protected updateView(viewType: ButtonViewType, view: ButtonView | null)\n    {\n        if (view === undefined) return;\n\n        this.removeView(viewType);\n\n        if (view === null)\n        {\n            return;\n        }\n\n        if (this.options?.nineSliceSprite)\n        {\n            if (typeof view === 'string')\n            {\n                this._views[viewType] = new NineSliceSprite({\n                    texture: Texture.from(view),\n                    leftWidth: this.options.nineSliceSprite[0],\n                    topHeight: this.options.nineSliceSprite[1],\n                    rightWidth: this.options.nineSliceSprite[2],\n                    bottomHeight: this.options.nineSliceSprite[3],\n                });\n            }\n            else\n            {\n                console.warn('NineSliceSprite can not be used with views set as Container.');\n            }\n        }\n\n        if (!this._views[viewType])\n        {\n            this._views[viewType] = getView(view);\n        }\n\n        this.setOffset(this._views[viewType], this.state, this.offset);\n\n        if (!this._views[viewType].parent)\n        {\n            this.innerView.addChild(this._views[viewType]);\n        }\n\n        this.updateAnchor();\n\n        if (this._views.iconView)\n        {\n            // place icon on top of the view\n            this.innerView.addChild(this._views.iconView);\n        }\n\n        if (this._views.textView)\n        {\n            // place text on top of the view\n            this.innerView.addChild(this._views.textView);\n        }\n\n        this.setState(this.state, true);\n    }\n\n    /**\n     * Removes button view by type\n     * @param {'defaultView' | 'hoverView' | 'pressedView' | 'disabledView'} viewType - type of the view to remove\n     */\n    removeView(viewType: ButtonViewType | 'textView' | 'iconView')\n    {\n        if (this._views[viewType])\n        {\n            this.innerView.removeChild(this._views[viewType]);\n            this._views[viewType] = null;\n        }\n    }\n\n    /**\n     * Sets the textView of the button.\n     * @param { string | number | PixiText | Text | BitmapText | HTMLText } textView - string, text or pixi text instance.\n     */\n    set textView(textView: AnyText | null)\n    {\n        if (textView === undefined) return;\n\n        this.removeView('textView');\n\n        if (textView === null)\n        {\n            return;\n        }\n\n        this.createTextView(textView);\n    }\n\n    /**\n     * Returns the text view of the button.\n     * @returns pixi text instance or undefined.\n     */\n    get textView(): PixiText | undefined\n    {\n        return this._views.textView;\n    }\n\n    /**\n     * Sets the iconView of the button.\n     * @param { string | Container } view - string (path to the image) or a Container-based view\n     */\n    set iconView(view: ButtonView | null)\n    {\n        if (view === undefined) return;\n\n        this.removeView('iconView');\n\n        if (view === null)\n        {\n            return;\n        }\n\n        this._views.iconView = getView(view);\n\n        if (!this._views.iconView.parent)\n        {\n            this.innerView.addChild(this._views.iconView);\n        }\n\n        this.setState(this.state, true);\n    }\n\n    /** Returns the icon view of the button. */\n    get iconView(): Container | undefined\n    {\n        return this._views.iconView;\n    }\n\n    /**\n     * Starts animation for the current button state if configured.\n     * @param {State} state\n     */\n    protected playAnimations(state: State)\n    {\n        if (!this.animations) return;\n\n        if (state === 'default' && !this.originalInnerViewState)\n        {\n            this.originalInnerViewState = {\n                x: this.innerView.x,\n                y: this.innerView.y,\n                width: this.innerView.width,\n                height: this.innerView.height,\n                scale: {\n                    x: this.innerView.scale.x,\n                    y: this.innerView.scale.y\n                }\n            };\n\n            // first animation state is default, so we don't need to animate it\n            // this part will run only once, during initialization\n            const defaultStateAnimation = this.animations?.default;\n\n            if (defaultStateAnimation)\n            {\n                this.innerView.x = defaultStateAnimation.props.x ?? this.originalInnerViewState.x;\n                this.innerView.y = defaultStateAnimation.props.y ?? this.originalInnerViewState.y;\n                this.innerView.width = defaultStateAnimation.props.width ?? this.originalInnerViewState.width;\n                this.innerView.height = defaultStateAnimation.props.height ?? this.originalInnerViewState.height;\n                this.innerView.scale.x = defaultStateAnimation.props.scale.x ?? this.originalInnerViewState.scale.x;\n                this.innerView.scale.y = defaultStateAnimation.props.scale.y ?? this.originalInnerViewState.scale.y;\n\n                return;\n            }\n        }\n\n        const stateAnimation = this.animations[state] ?? this.animations.default;\n\n        if (stateAnimation)\n        {\n            const data = stateAnimation;\n\n            this.defaultDuration = data.duration;\n\n            new Tween(this.innerView).to(data.props, data.duration).start();\n\n            return;\n        }\n\n        // if there is no animation for the current state, animate the button to the default state\n        new Tween(this.innerView).to(this.originalInnerViewState, this.defaultDuration).start();\n    }\n\n    protected initStateControl()\n    {\n        this.onDown.connect(() =>\n        {\n            this.setState('pressed');\n        });\n\n        this.onUp.connect(() =>\n        {\n            isMobile.any\n                ? this.setState('default')\n                : this.setState('hover');\n        });\n\n        this.onUpOut.connect(() =>\n        {\n            this.setState('default');\n        });\n\n        this.onOut.connect(() =>\n        {\n            if (!this.button.isDown)\n            {\n                this.setState('default');\n            }\n        });\n\n        this.onPress.connect(() =>\n        {\n            isMobile.any\n                ? this.setState('default')\n                : this.setState('hover');\n        });\n\n        this.onHover.connect(() =>\n        {\n            if (!this.button.isDown)\n            {\n                isMobile.any\n                    ? this.setState('default')\n                    : this.setState('hover');\n            }\n        });\n    }\n\n    /**\n     * Sets the button padding.\n     * @param {number} padding - padding of the button text and icon views.\n     */\n    set padding(padding: number)\n    {\n        this._padding = padding;\n\n        this.adjustTextView(this.state);\n        this.adjustIconView(this.state);\n    }\n\n    /** Returns the button padding. */\n    get padding(): number\n    {\n        return this._padding;\n    }\n\n    /**\n     * Sets the button offset.\n     * @param { { x?: number; y?: number } } offset - offset of the button.\n     * Can be set for each state of the button.\n     */\n    set offset(offset: Offset)\n    {\n        this._offset = offset;\n\n        this.updateAnchor();\n    }\n\n    /** Returns the button offset. */\n    get offset(): Offset\n    {\n        return this._offset;\n    }\n\n    /**\n     * Sets the button text offset.\n     * @param { { x?: number; y?: number } } textOffset - offsets of the button text view.\n     * can be set for each state of the button.\n     */\n    set textOffset(textOffset: Offset)\n    {\n        this._textOffset = textOffset;\n\n        this.adjustTextView(this.state);\n    }\n\n    /** Returns the button text offset. */\n    get textOffset(): Offset\n    {\n        return this._textOffset;\n    }\n\n    /**\n     * Sets width of a FancyButtons state views.\n     * If nineSliceSprite is set, then width will be set to nineSliceSprites of a views.\n     * If nineSliceSprite is not set, then width will control components width as Container.\n     * @param width - Width value.\n     */\n    override set width(width: number)\n    {\n        if (this.options?.nineSliceSprite)\n        {\n            if (this._views.defaultView)\n            {\n                this._views.defaultView.width = width;\n            }\n            if (this._views.hoverView)\n            {\n                this._views.hoverView.width = width;\n            }\n            if (this._views.pressedView)\n            {\n                this._views.pressedView.width = width;\n            }\n            if (this._views.disabledView)\n            {\n                this._views.disabledView.width = width;\n            }\n\n            this.adjustTextView(this.state);\n            this.adjustIconView(this.state);\n            this.updateAnchor();\n        }\n        else\n        {\n            super.width = width;\n        }\n    }\n\n    /** Gets width of a FancyButton. */\n    override get width(): number\n    {\n        return super.width;\n    }\n\n    /**\n     * Sets height of a FancyButtons state views.\n     * If nineSliceSprite is set, then height will be set to nineSliceSprites of a views.\n     * If nineSliceSprite is not set, then height will control components height as Container.\n     * @param height - Height value.\n     */\n    override set height(height: number)\n    {\n        if (this.options?.nineSliceSprite)\n        {\n            if (this._views.defaultView)\n            {\n                this._views.defaultView.height = height;\n            }\n            if (this._views.hoverView)\n            {\n                this._views.hoverView.height = height;\n            }\n            if (this._views.pressedView)\n            {\n                this._views.pressedView.height = height;\n            }\n            if (this._views.disabledView)\n            {\n                this._views.disabledView.height = height;\n            }\n\n            this.adjustTextView(this.state);\n            this.adjustIconView(this.state);\n            this.updateAnchor();\n        }\n        else\n        {\n            super.height = height;\n        }\n    }\n\n    /** Gets height of a FancyButton. */\n    override get height(): number\n    {\n        return super.height;\n    }\n}\n"],"names":[],"mappings":"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"}