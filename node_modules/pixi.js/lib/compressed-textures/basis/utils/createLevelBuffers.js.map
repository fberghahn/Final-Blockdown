{"version":3,"file":"createLevelBuffers.js","sources":["../../../../src/compressed-textures/basis/utils/createLevelBuffers.ts"],"sourcesContent":["import type { BasisTexture } from '../types';\n\nexport function createLevelBuffers(basisTexture: BasisTexture, basisTranscoderFormat: number): Uint8Array[]\n{\n    const images = basisTexture.getNumImages();\n    const levels = basisTexture.getNumLevels(0);\n\n    const success = basisTexture.startTranscoding();\n\n    if (!success)\n    {\n        throw new Error('startTranscoding failed');\n    }\n\n    const levelBuffers = [];\n\n    for (let levelIndex = 0; levelIndex < levels; ++levelIndex)\n    {\n        for (let sliceIndex = 0; sliceIndex < images; ++sliceIndex)\n        {\n            const transcodeSize = basisTexture.getImageTranscodedSizeInBytes(sliceIndex, levelIndex, basisTranscoderFormat);\n            const levelBuffer = new Uint8Array(transcodeSize);\n\n            const success = basisTexture.transcodeImage(levelBuffer, sliceIndex, levelIndex, basisTranscoderFormat, 1, 0);\n\n            if (!success)\n            {\n                throw new Error('transcodeImage failed');\n            }\n\n            levelBuffers.push(levelBuffer);\n        }\n    }\n\n    return levelBuffers;\n}\n"],"names":["success"],"mappings":";;;AAEgB,SAAA,kBAAA,CAAmB,cAA4B,qBAC/D,EAAA;AACI,EAAM,MAAA,MAAA,GAAS,aAAa,YAAa,EAAA,CAAA;AACzC,EAAM,MAAA,MAAA,GAAS,YAAa,CAAA,YAAA,CAAa,CAAC,CAAA,CAAA;AAE1C,EAAM,MAAA,OAAA,GAAU,aAAa,gBAAiB,EAAA,CAAA;AAE9C,EAAA,IAAI,CAAC,OACL,EAAA;AACI,IAAM,MAAA,IAAI,MAAM,yBAAyB,CAAA,CAAA;AAAA,GAC7C;AAEA,EAAA,MAAM,eAAe,EAAC,CAAA;AAEtB,EAAA,KAAA,IAAS,UAAa,GAAA,CAAA,EAAG,UAAa,GAAA,MAAA,EAAQ,EAAE,UAChD,EAAA;AACI,IAAA,KAAA,IAAS,UAAa,GAAA,CAAA,EAAG,UAAa,GAAA,MAAA,EAAQ,EAAE,UAChD,EAAA;AACI,MAAA,MAAM,aAAgB,GAAA,YAAA,CAAa,6BAA8B,CAAA,UAAA,EAAY,YAAY,qBAAqB,CAAA,CAAA;AAC9G,MAAM,MAAA,WAAA,GAAc,IAAI,UAAA,CAAW,aAAa,CAAA,CAAA;AAEhD,MAAMA,MAAAA,QAAAA,GAAU,aAAa,cAAe,CAAA,WAAA,EAAa,YAAY,UAAY,EAAA,qBAAA,EAAuB,GAAG,CAAC,CAAA,CAAA;AAE5G,MAAA,IAAI,CAACA,QACL,EAAA;AACI,QAAM,MAAA,IAAI,MAAM,uBAAuB,CAAA,CAAA;AAAA,OAC3C;AAEA,MAAA,YAAA,CAAa,KAAK,WAAW,CAAA,CAAA;AAAA,KACjC;AAAA,GACJ;AAEA,EAAO,OAAA,YAAA,CAAA;AACX;;;;"}